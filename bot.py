import streamlit as st
import google.generativeai as genai

# --- Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ---
my_secret_key = "AIzaSyCvVoS1Miq83dVhLCNAApAKBnx7iArMLH0"

st.set_page_config(page_title="Ù…Ø³Ø§Ø¹Ø¯ 1xBet", page_icon="ğŸ¤–")
st.title("ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ 1xBet Ø§Ù„Ø°ÙƒÙŠ")

# --- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ---
knowledge_base = """
ÙƒÙŠÙÙŠØ© Ø±Ø¨Ø· Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© 1xBet:
1. Ù†Ø¶ØºØ· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© > Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ > Ø±Ø¨Ø· Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.
2. Ù†ÙƒØªØ¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆÙ†Ø¶ØºØ· Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚.
3. Ù†Ø­Ù„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ØŒ ÙˆØ³ÙŠØµÙ„ ÙƒÙˆØ¯ Ù„Ù„ØªÙØ¹ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„.
4. Ù†Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙˆÙ†Ø¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø© ÙˆÙ†Ø¶ØºØ· ØªÙØ¹ÙŠÙ„.

Ø£Ø³Ø¨Ø§Ø¨ Ø±ÙØ¶ Ø±Ø¨Ø· Ø§Ù„Ø¨Ø±ÙŠØ¯:
1. Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ Ø¨Ø­Ø³Ø§Ø¨ Ø¢Ø®Ø±: ÙŠØ¸Ù‡Ø± Ø®Ø·Ø£ "Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§". Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ÙŠÙ…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯.
2. Ø¹Ø¯Ù… ÙˆØµÙˆÙ„ Ø§Ù„ÙƒÙˆØ¯: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡Ø§ (Spam). Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø£Ùˆ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù….

Ø±Ù‡Ø§Ù† Ù…Ø­Ø¸ÙˆØ¸ (Lucky Bet):
- Ù‡Ùˆ Ø¯Ù…Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø§ÙƒØ³Ø¨Ø±ÙŠØ³.
- ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ Ù…Ù† 2 Ù„Ù€ 8 Ø£Ø­Ø¯Ø§Ø«.
- Ø§Ù„Ù…ÙŠØ²Ø©: Ù„Ùˆ Ø­Ø¯Ø« ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙƒØ³Ø¨ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ø¯ (Ù…Ø´ Ù„Ø§Ø²Ù… ÙƒÙ„Ù‡ ÙŠÙƒØ³Ø¨).
"""

# --- Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ---
try:
    genai.configure(api_key=my_secret_key)
    
    # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆØ¯ÙŠÙ„ Ù…ØªØ§Ø­
    available_model = None
    for m in genai.list_models():
        if 'generateContent' in m.supported_generation_methods:
            available_model = m.name
            break
    
    if available_model:
        # Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ù„ÙŠ Ù„Ù‚ÙŠÙ†Ø§Ù‡
        model = genai.GenerativeModel(available_model)
        
        if "messages" not in st.session_state:
            st.session_state.messages = []

        for msg in st.session_state.messages:
            st.chat_message(msg["role"]).write(msg["content"])

        if prompt := st.chat_input("Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."):
            st.session_state.messages.append({"role": "user", "content": prompt})
            st.chat_message("user").write(prompt)

            full_prompt = f"Ø£Ù†Øª Ù…ÙˆØ¸Ù Ø¯Ø¹Ù… ÙÙ†ÙŠ. Ø¬Ø§ÙˆØ¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ ÙÙ‚Ø·:\n{knowledge_base}\nØ§Ù„Ø³Ø¤Ø§Ù„: {prompt}"
            
            with st.spinner('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...'):
                response = model.generate_content(full_prompt)
                st.session_state.messages.append({"role": "assistant", "content": response.text})
                st.chat_message("assistant").write(response.text)
    else:
        st.error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙˆØ¯ÙŠÙ„ Ù…ØªØ§Ø­ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨.")

except Exception as e:
    st.error(f"Ø­Ø¯Ø« Ø®Ø·Ø£: {e}")
