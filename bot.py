import streamlit as st
import google.generativeai as genai

# ==========================================
# ğŸ” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
# ==========================================
BOT_PASSWORD = "12345"  # ØºÙŠØ±ÙŠ Ø§Ù„Ø±Ù‚Ù… Ø¯Ù‡ Ù„Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ÙŠÙ‡

# --- Ù…ÙØªØ§Ø­Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ---
my_secret_key = "AIzaSyCvVoS1Miq83dVhLCNAApAKBnx7iArMLH0"

# Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙØ­Ø©
st.set_page_config(page_title="Ù…Ø³Ø§Ø¹Ø¯ 1xBet", page_icon="ğŸ”’", layout="centered")

# ==========================================
# ğŸš« ÙƒÙˆØ¯ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ù‚ÙˆØ§Ø¦Ù…
# ==========================================
hide_streamlit_style = """
            <style>
            #MainMenu {visibility: hidden;}
            footer {visibility: hidden;}
            header {visibility: hidden;}
            .stDeployButton {display:none;}
            </style>
            """
st.markdown(hide_streamlit_style, unsafe_allow_html=True)

# ==========================================
# ğŸ›‘ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„)
# ==========================================
# Ù„Ùˆ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ù„Ø³Ù‡ Ù…Ø¯Ø®Ù„Ø´ Ø£Ùˆ ØºÙ„Ø·
if "authenticated" not in st.session_state:
    st.session_state.authenticated = False

if not st.session_state.authenticated:
    st.title("ğŸ”’ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„")
    password_input = st.text_input("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:", type="password")
    
    if st.button("Ø¯Ø®ÙˆÙ„"):
        if password_input == BOT_PASSWORD:
            st.session_state.authenticated = True
            st.rerun()  # Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø¯Ø®ÙˆÙ„
        else:
            st.error("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© â›”")
    st.stop()  # ÙˆÙ‚Ù Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ Ù„Ø­Ø¯ Ù…Ø§ ÙŠØ¯Ø®Ù„ ØµØ­

# ==========================================
# âœ… Ù‡Ù†Ø§ ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¨ÙˆØª (Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØµØ­ÙŠØ­)
# ==========================================
st.title("ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ 1xBet Ø§Ù„Ø°ÙƒÙŠ")
st.success("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù…ØªØµÙ„ Ø¨Ø£Ù…Ø§Ù†. âœ…")

# Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
knowledge_base = """
ÙƒÙŠÙÙŠØ© Ø±Ø¨Ø· Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© 1xBet:
1. Ù†Ø¶ØºØ· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© > Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ > Ø±Ø¨Ø· Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.
2. Ù†ÙƒØªØ¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆÙ†Ø¶ØºØ· Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚.
3. Ù†Ø­Ù„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ØŒ ÙˆØ³ÙŠØµÙ„ ÙƒÙˆØ¯ Ù„Ù„ØªÙØ¹ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„.
4. Ù†Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙˆÙ†Ø¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø®Ø§Ù†Ø© ÙˆÙ†Ø¶ØºØ· ØªÙØ¹ÙŠÙ„.

Ø£Ø³Ø¨Ø§Ø¨ Ø±ÙØ¶ Ø±Ø¨Ø· Ø§Ù„Ø¨Ø±ÙŠØ¯:
1. Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ Ø¨Ø­Ø³Ø§Ø¨ Ø¢Ø®Ø±: ÙŠØ¸Ù‡Ø± Ø®Ø·Ø£ "Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§". Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ÙŠÙ…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯.
2. Ø¹Ø¯Ù… ÙˆØµÙˆÙ„ Ø§Ù„ÙƒÙˆØ¯: ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡Ø§ (Spam). Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø£Ùˆ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù….

Ø±Ù‡Ø§Ù† Ù…Ø­Ø¸ÙˆØ¸ (Lucky Bet):
- Ù‡Ùˆ Ø¯Ù…Ø¬ Ø¨ÙŠÙ† Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠ ÙˆØ§Ù„Ø§ÙƒØ³Ø¨Ø±ÙŠØ³.
- ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ Ù…Ù† 2 Ù„Ù€ 8 Ø£Ø­Ø¯Ø§Ø«.
- Ø§Ù„Ù…ÙŠØ²Ø©: Ù„Ùˆ Ø­Ø¯Ø« ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙƒØ³Ø¨ØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¹Ø§Ø¦Ø¯ (Ù…Ø´ Ù„Ø§Ø²Ù… ÙƒÙ„Ù‡ ÙŠÙƒØ³Ø¨).
"""

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
try:
    genai.configure(api_key=my_secret_key)
    
    available_model = None
    for m in genai.list_models():
        if 'generateContent' in m.supported_generation_methods:
            available_model = m.name
            break
            
    if available_model:
        model = genai.GenerativeModel(available_model)

        if "messages" not in st.session_state:
            st.session_state.messages = []

        for msg in st.session_state.messages:
            st.chat_message(msg["role"]).write(msg["content"])

        if prompt := st.chat_input("Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."):
            st.session_state.messages.append({"role": "user", "content": prompt})
            st.chat_message("user").write(prompt)

            full_prompt = f"Ø£Ù†Øª Ù…ÙˆØ¸Ù Ø¯Ø¹Ù… ÙÙ†ÙŠ. Ø¬Ø§ÙˆØ¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ ÙÙ‚Ø·:\n{knowledge_base}\nØ§Ù„Ø³Ø¤Ø§Ù„: {prompt}"
            
            with st.spinner('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...'):
                response = model.generate_content(full_prompt)
                st.session_state.messages.append({"role": "assistant", "content": response.text})
                st.chat_message("assistant").write(response.text)
    else:
        st.error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆØ¯ÙŠÙ„ Ù…ØªØ§Ø­.")

except Exception as e:
    st.error(f"Ø­Ø¯Ø« Ø®Ø·Ø£: {e}")
